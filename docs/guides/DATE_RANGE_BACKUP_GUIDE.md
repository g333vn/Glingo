# ğŸ“… HÆ¯á»šNG DáºªN BACKUP THEO KHOáº¢NG THá»œI GIAN

## ğŸ¯ Tá»”NG QUAN

TÃ­nh nÄƒng **Backup theo Khoáº£ng Thá»i gian** cho phÃ©p báº¡n backup Ä‘á»“ng loáº¡t cÃ¡c dá»¯ liá»‡u Ä‘Ã£ táº¡o trong:
- 1 ngÃ y cá»¥ thá»ƒ
- 1 khoáº£ng thá»i gian (tá»« ngÃ y X Ä‘áº¿n ngÃ y Y)
- Nhiá»u loáº¡i dá»¯ liá»‡u cÃ¹ng lÃºc (Books, Series, Exams, Quizzes, etc.)

---

## ğŸš€ CÃCH Sá»¬ Dá»¤NG

### **BÆ°á»›c 1: Truy cáº­p Backup & Restore**

1. VÃ o Admin Panel
2. Click **"Backup & Restore"** trong sidebar
3. Click tab **"Backup theo Thá»i gian"**

---

### **BÆ°á»›c 2: Chá»n khoáº£ng thá»i gian**

**CÃ¡ch 1: DÃ¹ng Quick Options (Nhanh)**

- Click **"HÃ´m nay"** â†’ Tá»± Ä‘á»™ng set tá»« hÃ´m nay Ä‘áº¿n hÃ´m nay
- Click **"Tuáº§n nÃ y"** â†’ Tá»± Ä‘á»™ng set tá»« thá»© 2 Ä‘áº¿n chá»§ nháº­t
- Click **"ThÃ¡ng nÃ y"** â†’ Tá»± Ä‘á»™ng set tá»« ngÃ y 1 Ä‘áº¿n ngÃ y cuá»‘i thÃ¡ng

**CÃ¡ch 2: Chá»n thá»§ cÃ´ng**

- **Tá»« ngÃ y:** Chá»n ngÃ y báº¯t Ä‘áº§u
- **Äáº¿n ngÃ y:** Chá»n ngÃ y káº¿t thÃºc

---

### **BÆ°á»›c 3: Chá»n loáº¡i dá»¯ liá»‡u**

Chá»n má»™t hoáº·c nhiá»u loáº¡i dá»¯ liá»‡u:

- â˜‘ **Táº¥t cáº£** - Backup táº¥t cáº£ loáº¡i dá»¯ liá»‡u
- â˜‘ **Books** - Chá»‰ backup Books
- â˜‘ **Series** - Chá»‰ backup Series
- â˜‘ **Chapters** - Chá»‰ backup Chapters
- â˜‘ **Lessons** - Chá»‰ backup Lessons
- â˜‘ **Quizzes** - Chá»‰ backup Quizzes
- â˜‘ **Exams** - Chá»‰ backup Exams

**LÆ°u Ã½:**
- Náº¿u chá»n "Táº¥t cáº£", cÃ¡c option khÃ¡c sáº½ bá»‹ bá» chá»n
- Náº¿u chá»n cÃ¡c option khÃ¡c, "Táº¥t cáº£" sáº½ bá»‹ bá» chá»n

---

### **BÆ°á»›c 4: Chá»n Options (TÃ¹y chá»n)**

â˜‘ **Bao gá»“m dá»¯ liá»‡u liÃªn quan**

- âœ… **Báº­t:** Khi backup Books â†’ Tá»± Ä‘á»™ng backup Chapters, Lessons, Quizzes cá»§a Books Ä‘Ã³
- âŒ **Táº¯t:** Chá»‰ backup Books, khÃ´ng backup dá»¯ liá»‡u liÃªn quan

**VÃ­ dá»¥:**
- Backup Books tá»« 2025-01-01 Ä‘áº¿n 2025-01-31
- Báº­t "Bao gá»“m dá»¯ liá»‡u liÃªn quan"
- Káº¿t quáº£: Books + Táº¥t cáº£ Chapters, Lessons, Quizzes cá»§a cÃ¡c Books Ä‘Ã³

---

### **BÆ°á»›c 5: Preview (Xem trÆ°á»›c)**

1. Click nÃºt **"Preview"**
2. Xem tÃ³m táº¯t:
   - Sá»‘ lÆ°á»£ng Books sáº½ export
   - Sá»‘ lÆ°á»£ng Series sáº½ export
   - Sá»‘ lÆ°á»£ng Chapters sáº½ export
   - Sá»‘ lÆ°á»£ng Lessons sáº½ export
   - Sá»‘ lÆ°á»£ng Quizzes sáº½ export
   - Sá»‘ lÆ°á»£ng Exams sáº½ export

**LÆ°u Ã½:** Preview chá»‰ hiá»ƒn thá»‹ sá»‘ lÆ°á»£ng, khÃ´ng export thá»±c sá»±.

---

### **BÆ°á»›c 6: Export**

1. Click nÃºt **"Export"**
2. File sáº½ download vá» `Downloads/`
3. TÃªn file: `elearning-backup-date-range-2025-01-01_to_2025-01-31_10-30-45.json`

---

## ğŸ“‹ VÃ Dá»¤ Sá»¬ Dá»¤NG

### **VÃ­ dá»¥ 1: Backup hÃ´m nay**

```
1. Click "HÃ´m nay"
2. Chá»n "Táº¥t cáº£"
3. Click "Preview" â†’ Xem sá»‘ lÆ°á»£ng
4. Click "Export" â†’ Download file
```

---

### **VÃ­ dá»¥ 2: Backup tuáº§n nÃ y (chá»‰ Exams)**

```
1. Click "Tuáº§n nÃ y"
2. Chá»‰ chá»n â˜‘ "Exams"
3. Bá» chá»n "Bao gá»“m dá»¯ liá»‡u liÃªn quan"
4. Click "Preview" â†’ Xem sá»‘ lÆ°á»£ng Exams
5. Click "Export" â†’ Download file
```

---

### **VÃ­ dá»¥ 3: Backup thÃ¡ng nÃ y (Books + Exams)**

```
1. Click "ThÃ¡ng nÃ y"
2. Chá»n â˜‘ "Books" vÃ  â˜‘ "Exams"
3. Báº­t â˜‘ "Bao gá»“m dá»¯ liá»‡u liÃªn quan"
4. Click "Preview" â†’ Xem sá»‘ lÆ°á»£ng
5. Click "Export" â†’ Download file
```

---

### **VÃ­ dá»¥ 4: Backup khoáº£ng thá»i gian tÃ¹y chá»‰nh**

```
1. Chá»n "Tá»« ngÃ y": 2025-01-01
2. Chá»n "Äáº¿n ngÃ y": 2025-01-31
3. Chá»n â˜‘ "Books", â˜‘ "Series", â˜‘ "Exams"
4. Click "Preview" â†’ Xem sá»‘ lÆ°á»£ng
5. Click "Export" â†’ Download file
```

---

## âš™ï¸ CÃCH HOáº T Äá»˜NG

### **Metadata Timestamp**

Táº¥t cáº£ dá»¯ liá»‡u tá»« bÃ¢y giá» sáº½ cÃ³ metadata:
- `createdAt` - NgÃ y táº¡o
- `updatedAt` - NgÃ y cáº­p nháº­t

**VÃ­ dá»¥:**
```json
{
  "id": "book-1",
  "title": "Book Title",
  "level": "n1",
  "createdAt": "2025-01-19T10:30:45.123Z",
  "updatedAt": "2025-01-19T10:30:45.123Z"
}
```

---

### **Filter theo Date Range**

System sáº½ filter dá»¯ liá»‡u dá»±a trÃªn:
- **Books, Series, Chapters, Lessons, Quizzes:** DÃ¹ng `createdAt`
- **Exams:** DÃ¹ng `date` (náº¿u cÃ³) hoáº·c `createdAt` (fallback)

**Logic:**
```javascript
// Kiá»ƒm tra item cÃ³ trong date range khÃ´ng
if (item.createdAt >= startDate && item.createdAt <= endDate) {
  // Include in export
}
```

---

### **Bao gá»“m dá»¯ liá»‡u liÃªn quan**

Khi báº­t option nÃ y:

**Backup Books:**
- âœ… Books trong date range
- âœ… Táº¥t cáº£ Chapters cá»§a Books Ä‘Ã³ (khÃ´ng filter date)
- âœ… Táº¥t cáº£ Lessons cá»§a Chapters Ä‘Ã³ (khÃ´ng filter date)
- âœ… Táº¥t cáº£ Quizzes cá»§a Lessons Ä‘Ã³ (khÃ´ng filter date)

**LÃ½ do:**
- Äáº£m báº£o tÃ­nh toÃ n váº¹n dá»¯ liá»‡u
- Books khÃ´ng thá»ƒ thiáº¿u Chapters, Lessons, Quizzes

---

## ğŸ“Š Cáº¤U TRÃšC FILE EXPORT

```json
{
  "timestamp": "2025-01-19T10:30:45.123Z",
  "version": "2.0.0",
  "type": "date-range",
  "dateRange": {
    "from": "2025-01-01",
    "to": "2025-01-31"
  },
  "dataTypes": ["books", "exams"],
  "includeRelated": true,
  "books": {
    "n1": [...],
    "n2": [...]
  },
  "series": {...},
  "chapters": {...},
  "lessons": {...},
  "quizzes": {...},
  "exams": {...},
  "summary": {
    "books": 5,
    "series": 2,
    "chapters": 10,
    "lessons": 25,
    "quizzes": 25,
    "exams": 3
  }
}
```

---

## âš ï¸ LÆ¯U Ã QUAN TRá»ŒNG

### **1. Dá»¯ liá»‡u cÅ© khÃ´ng cÃ³ timestamp:**

- âš ï¸ Dá»¯ liá»‡u táº¡o trÆ°á»›c khi cÃ³ tÃ­nh nÄƒng nÃ y **khÃ´ng cÃ³** `createdAt`/`updatedAt`
- âœ… Dá»¯ liá»‡u má»›i tá»« bÃ¢y giá» **sáº½ cÃ³** timestamp
- ğŸ’¡ **Giáº£i phÃ¡p:** Dá»¯ liá»‡u cÅ© sáº½ khÃ´ng Ä‘Æ°á»£c filter, chá»‰ dá»¯ liá»‡u má»›i cÃ³ timestamp má»›i Ä‘Æ°á»£c backup

---

### **2. Exams dÃ¹ng field `date`:**

- âœ… Exams cÃ³ field `date` (ngÃ y cá»§a exam)
- âœ… System sáº½ dÃ¹ng `date` Ä‘á»ƒ filter exams
- âœ… Fallback vá» `createdAt` náº¿u khÃ´ng cÃ³ `date`

---

### **3. Bao gá»“m dá»¯ liá»‡u liÃªn quan:**

- âœ… **Báº­t:** Äáº£m báº£o tÃ­nh toÃ n váº¹n, nhÆ°ng file cÃ³ thá»ƒ lá»›n hÆ¡n
- âŒ **Táº¯t:** Chá»‰ backup dá»¯ liá»‡u Ä‘Æ°á»£c chá»n, file nhá» hÆ¡n

---

## ğŸ¯ BEST PRACTICES

### **1. Backup Ä‘á»‹nh ká»³:**

```
Má»—i tuáº§n:
1. Click "Tuáº§n nÃ y"
2. Chá»n "Táº¥t cáº£"
3. Báº­t "Bao gá»“m dá»¯ liá»‡u liÃªn quan"
4. Export
```

---

### **2. Backup sau khi nháº­p nhiá»u:**

```
Sau khi nháº­p 10 Books má»›i:
1. Chá»n ngÃ y hÃ´m nay
2. Chá»n "Books"
3. Báº­t "Bao gá»“m dá»¯ liá»‡u liÃªn quan"
4. Export
```

---

### **3. Backup chá»‰ Exams:**

```
Backup táº¥t cáº£ Exams cá»§a thÃ¡ng:
1. Click "ThÃ¡ng nÃ y"
2. Chá»‰ chá»n "Exams"
3. Export
```

---

## ğŸ› TROUBLESHOOTING

### **Lá»—i: "KhÃ´ng tÃ¬m tháº¥y dá»¯ liá»‡u trong khoáº£ng thá»i gian nÃ y"**

**NguyÃªn nhÃ¢n:**
- KhÃ´ng cÃ³ dá»¯ liá»‡u nÃ o cÃ³ `createdAt` trong khoáº£ng thá»i gian nÃ y
- Dá»¯ liá»‡u cÅ© khÃ´ng cÃ³ timestamp

**Giáº£i phÃ¡p:**
1. Kiá»ƒm tra dá»¯ liá»‡u cÃ³ Ä‘Æ°á»£c táº¡o trong khoáº£ng thá»i gian khÃ´ng
2. Dá»¯ liá»‡u má»›i tá»« bÃ¢y giá» sáº½ cÃ³ timestamp
3. DÃ¹ng "Export All" Ä‘á»ƒ backup táº¥t cáº£ (ká»ƒ cáº£ dá»¯ liá»‡u cÅ©)

---

### **Lá»—i: Preview hiá»ƒn thá»‹ 0 items**

**NguyÃªn nhÃ¢n:**
- KhÃ´ng cÃ³ dá»¯ liá»‡u trong khoáº£ng thá»i gian
- Dá»¯ liá»‡u cÅ© khÃ´ng cÃ³ timestamp

**Giáº£i phÃ¡p:**
- Má»Ÿ rá»™ng khoáº£ng thá»i gian
- Hoáº·c dÃ¹ng "Export All" trong tab "Export/Import ThÃ´ng thÆ°á»ng"

---

## ğŸ“ TÃ“M Táº®T

### **TÃ­nh nÄƒng:**

1. âœ… Backup theo ngÃ y cá»¥ thá»ƒ
2. âœ… Backup theo khoáº£ng thá»i gian
3. âœ… Chá»n nhiá»u loáº¡i dá»¯ liá»‡u cÃ¹ng lÃºc
4. âœ… Quick Options (HÃ´m nay, Tuáº§n nÃ y, ThÃ¡ng nÃ y)
5. âœ… Preview trÆ°á»›c khi export
6. âœ… Option bao gá»“m dá»¯ liá»‡u liÃªn quan

### **CÃ¡ch sá»­ dá»¥ng:**

1. VÃ o **Backup & Restore** â†’ Tab **"Backup theo Thá»i gian"**
2. Chá»n khoáº£ng thá»i gian (Quick Options hoáº·c thá»§ cÃ´ng)
3. Chá»n loáº¡i dá»¯ liá»‡u
4. Chá»n options (náº¿u cáº§n)
5. Click **"Preview"** Ä‘á»ƒ xem trÆ°á»›c
6. Click **"Export"** Ä‘á»ƒ download

---

**TÃ­nh nÄƒng Ä‘Ã£ sáºµn sÃ ng sá»­ dá»¥ng!** ğŸš€âœ…

